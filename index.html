
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il Nostro Matrimonio</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Georgia', serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #333; overflow-x: hidden; }
        .sparkle { position: fixed; width: 4px; height: 4px; background: white; border-radius: 50%; pointer-events: none; animation: sparkleFloat 4s infinite ease-in-out; opacity: 0; }
        @keyframes sparkleFloat { 0%, 100% { opacity: 0; transform: translateY(0) scale(0); } 50% { opacity: 1; transform: translateY(-100px) scale(1); } }
        .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 40px 20px 80px 20px; position: relative; background: linear-gradient(135deg, rgba(255,182,193,0.3) 0%, rgba(186,85,211,0.3) 100%); }
        .castle { font-size: 80px; animation: float 3s ease-in-out infinite; margin-bottom: 20px; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
        h1 { font-size: 3.5em; color: white; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); margin-bottom: 20px; animation: fadeInDown 1s ease-out; }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .date { font-size: 1.8em; color: #ffe4e1; margin-bottom: 30px; animation: fadeInUp 1s ease-out 0.5s both; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .countdown { display: flex; gap: 15px; justify-content: center; margin: 30px 0; flex-wrap: wrap; }
        .countdown-box { background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; min-width: 90px; border: 2px solid rgba(255, 255, 255, 0.3); animation: fadeInUp 1s ease-out 0.7s both; }
        .countdown-number { font-size: 2.5em; font-weight: bold; color: white; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }
        .countdown-label { font-size: 0.9em; color: #ffe4e1; margin-top: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .hearts { font-size: 40px; animation: pulse 2s ease-in-out infinite; margin-top: 20px; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .language-switcher { position: fixed; top: 20px; right: 20px; z-index: 9997; display: flex; gap: 10px; background: rgba(255, 255, 255, 0.9); padding: 10px 15px; border-radius: 25px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2); backdrop-filter: blur(10px); }
        .lang-btn { background: transparent; border: 2px solid #764ba2; color: #764ba2; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 0.9em; transition: all 0.3s ease; font-family: 'Georgia', serif; }
        .lang-btn:hover { background: #f0e6ff; transform: scale(1.05); }
        .lang-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-color: transparent; }
        .lang-en { display: none !important; }
        .lang-it { display: block; }
        body.lang-english .lang-it { display: none !important; }
        body.lang-english .lang-en { display: block !important; }
        section { background: white; border-radius: 30px; margin-top: -60px; position: relative; z-index: 1; box-shadow: 0 20px 60px rgba(0,0,0,0.3); padding: 60px 20px; }
        .section-content { max-width: 900px; margin: 0 auto; }
        .info-box { background: linear-gradient(135deg, #ffeef8 0%, #e8d5ff 100%); padding: 30px; border-radius: 20px; margin: 30px 0; transform: translateY(50px); opacity: 0; transition: all 0.8s ease-out; border: 3px solid #f0d4ff; }
        .info-box.visible { transform: translateY(0); opacity: 1; }
        .info-box h2 { color: #764ba2; font-size: 2em; margin-bottom: 20px; display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
        .icon { font-size: 1.2em; animation: bounce 2s ease-in-out infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .info-box p { font-size: 1.1em; line-height: 1.8; color: #555; }
        .maps-button { display: inline-block; background: linear-gradient(135deg, #4285f4 0%, #34a853 100%); color: white; padding: 12px 25px; border-radius: 25px; text-decoration: none; font-weight: bold; font-size: 1em; margin-top: 15px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(66, 133, 244, 0.3); }
        .maps-button:hover { transform: translateY(-3px); box-shadow: 0 6px 25px rgba(66, 133, 244, 0.5); }
        .hotel-list { display: block; margin-top: 10px; line-height: 2; }
        .phone-link { color: #667eea; text-decoration: none; font-weight: bold; transition: all 0.3s ease; border-bottom: 2px solid transparent; }
        .phone-link:hover { color: #764ba2; border-bottom: 2px solid #764ba2; }
        .gift-reveal-container { text-align: center; }
        .gift-reveal-button { background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%); color: white; border: none; padding: 15px 35px; border-radius: 25px; font-size: 1.15em; cursor: pointer; font-family: 'Georgia', serif; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(255, 20, 147, 0.3); margin-bottom: 20px; }
        .gift-reveal-button:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(255, 20, 147, 0.5); }
        .gift-info-hidden { max-height: 0; overflow: hidden; transition: all 0.5s ease; opacity: 0; }
        .gift-info-hidden.show { max-height: 1000px; opacity: 1; }
        .gift-info-content { background: linear-gradient(135deg, #fff8fc 0%, #ffe6f5 100%); padding: 30px; border-radius: 15px; margin-top: 20px; border: 2px solid #ffb6d9; text-align: left; }
        .iban-box { background: white; padding: 20px; border-radius: 12px; border: 2px dashed #ff69b4; margin: 15px 0; font-size: 1.05em; line-height: 1.8; }
        .iban-code { font-family: 'Courier New', monospace; background: #fff0f8; padding: 5px 10px; border-radius: 5px; font-weight: bold; color: #d91a7a; letter-spacing: 1px; }
        .copy-iban-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 25px; border-radius: 20px; font-size: 1em; cursor: pointer; font-family: 'Georgia', serif; font-weight: bold; transition: all 0.3s ease; margin-top: 10px; width: 100%; }
        .copy-iban-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(118, 75, 162, 0.4); }
        .menu-selection { background: #f9f5ff; padding: 20px; border-radius: 15px; margin: 10px 0; border: 2px solid #e0d4ff; }
        .menu-selection h3 { color: #764ba2; font-size: 1.2em; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .menu-selection select { margin-top: 8px; }
        .rsvp-form { background: linear-gradient(135deg, #fff5f7 0%, #f0e6ff 100%); padding: 40px 30px; border-radius: 20px; margin-top: 40px; border: 3px solid #ffd4e5; }
        .rsvp-form h2 { color: #764ba2; font-size: 2.2em; margin-bottom: 30px; text-align: center; }
        .form-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 8px; color: #764ba2; font-weight: bold; font-size: 1.05em; }
        input, select, textarea { width: 100%; padding: 15px; border: 2px solid #e0d4ff; border-radius: 12px; font-size: 1em; font-family: 'Georgia', serif; transition: all 0.3s ease; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #764ba2; box-shadow: 0 0 15px rgba(118, 75, 162, 0.2); }
        button[type="submit"] { width: 100%; padding: 18px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; font-size: 1.3em; cursor: pointer; transition: all 0.3s ease; font-family: 'Georgia', serif; font-weight: bold; box-shadow: 0 5px 20px rgba(118, 75, 162, 0.4); }
        button[type="submit"]:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(118, 75, 162, 0.6); }
        .loader-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); z-index: 10000; align-items: center; justify-content: center; }
        .loader-overlay.show { display: flex; }
        .loader-content { text-align: center; }
        .loader-spinner { width: 80px; height: 80px; border: 8px solid rgba(255, 255, 255, 0.2); border-top: 8px solid #fff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loader-text { color: white; font-size: 1.3em; margin-top: 10px; }
        .loader-hearts { font-size: 2em; animation: loaderPulse 1.5s ease-in-out infinite; }
        @keyframes loaderPulse { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.2); opacity: 1; } }
        .popup-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); z-index: 10001; padding: 20px; }
        .popup-box { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7); background: linear-gradient(135deg, #fff 0%, #f8f0ff 100%); padding: 40px 30px; border-radius: 30px; text-align: center; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); border: 4px solid #764ba2; animation: popupAppear 0.5s ease-out forwards; z-index: 10002; }
        @keyframes popupAppear { to { transform: translate(-50%, -50%) scale(1); } }
        .popup-icon { font-size: 60px; animation: popupBounce 1s ease-in-out infinite; margin-bottom: 20px; }
        @keyframes popupBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .popup-title { font-size: 2em; color: #764ba2; margin-bottom: 15px; font-weight: bold; }
        .popup-message { font-size: 1.2em; color: #555; margin-bottom: 30px; line-height: 1.6; }
        .popup-close { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 25px; font-size: 1.2em; cursor: pointer; font-family: 'Georgia', serif; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 5px 20px rgba(118, 75, 162, 0.4); }
        .popup-close:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(118, 75, 162, 0.6); }
        .confetti { position: absolute; width: 10px; height: 10px; background: #764ba2; animation: confettiFall 3s ease-out forwards; }
        @keyframes confettiFall { to { transform: translateY(500px) rotate(360deg); opacity: 0; } }
        footer { text-align: center; padding: 40px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-size: 1.2em; margin-top: 50px; }
        @media (max-width: 768px) { h1 { font-size: 2em; } .castle { font-size: 60px; } .date { font-size: 1.3em; } .countdown-box { min-width: 70px; padding: 15px 10px; } .countdown-number { font-size: 2em; } .info-box h2 { font-size: 1.5em; } .loader-spinner { width: 60px; height: 60px; border-width: 6px; } section { margin-top: -40px; padding: 40px 15px; } }
    </style>
</head>
<body>
    <div id="sparkles"></div>
    <div class="language-switcher">
        <button class="lang-btn active" onclick="setLanguage('it')" id="btnIt">üáÆüáπ Italiano</button>
        <button class="lang-btn" onclick="setLanguage('en')" id="btnEn">üá¨üáß English</button>
    </div>
    <div class="hero">
        <div class="castle">üè∞</div>
        <h1 class="lang-it">Il Nostro Giorno Speciale</h1>
        <h1 class="lang-en">Our Special Day</h1>
        <div class="date lang-it">üìÖ 24 Agosto 2026</div>
        <div class="date lang-en">üìÖ August 24, 2026</div>
        <div class="countdown">
            <div class="countdown-box"><div class="countdown-number" id="days">0</div><div class="countdown-label">Giorni</div></div>
            <div class="countdown-box"><div class="countdown-number" id="hours">0</div><div class="countdown-label">Ore</div></div>
            <div class="countdown-box"><div class="countdown-number" id="minutes">0</div><div class="countdown-label">Minuti</div></div>
            <div class="countdown-box"><div class="countdown-number" id="seconds">0</div><div class="countdown-label">Secondi</div></div>
        </div>
        <div class="hearts">üíï üíç üíï</div>
    </div>
    <div class="container"><section><div class="section-content">
        <div class="info-box">
            <h2 class="lang-it"><span class="icon">‚õ™</span> Cerimonia e Ricevimento</h2>
            <h2 class="lang-en"><span class="icon">‚õ™</span> Ceremony and Reception</h2>
            <p class="lang-it"><strong>Dove:</strong> Villa Grandinetti, SS 18 Tirrena Inferiore, Nocera Torinese<br><strong>Cerimonia:</strong> Ore 17:30<br><strong>Ricevimento:</strong> Ore 20:00<br><strong>Cena e Festa:</strong> A seguire sotto le stelle<br><br><a href="https://www.google.com/maps/search/?api=1&query=Villa+Grandinetti+SS+18+Tirrena+Inferiore+Nocera+Torinese" target="_blank" class="maps-button">üìç Apri in Google Maps</a></p>
            <p class="lang-en"><strong>Where:</strong> Villa Grandinetti, SS 18 Tirrena Inferiore, Nocera Torinese<br><strong>Ceremony:</strong> 5:30 PM<br><strong>Reception:</strong> 8:00 PM<br><strong>Dinner & Party:</strong> Under the stars<br><br><a href="https://www.google.com/maps/search/?api=1&query=Villa+Grandinetti+SS+18+Tirrena+Inferiore+Nocera+Torinese" target="_blank" class="maps-button">üìç Open in Google Maps</a></p>
        </div>
        <div class="info-box">
            <h2 class="lang-it"><span class="icon">‚ÑπÔ∏è</span> Informazioni Utili</h2>
            <h2 class="lang-en"><span class="icon">‚ÑπÔ∏è</span> Useful Information</h2>
            <p class="lang-it"><strong>Parcheggio:</strong> Disponibile presso la villa<br><br><strong>Hotel Consigliati:</strong><br><span class="hotel-list">üè® <strong>Acquamarina Hotel</strong> (300m) - <a href="tel:+393487023136" class="phone-link">348 702 3136</a><br>üè® <strong>Palace Hotel</strong> (2km) - <a href="tel:+390968932199" class="phone-link">0968 93219</a><br>üè® <strong>Hotel Lions</strong> (2km) - <a href="tel:+390968999870" class="phone-link">0968 999870</a><br>üè® <strong>Crialesi Boutique Room</strong> (5km) - <a href="tel:+393533412921" class="phone-link">353 341 2921</a></span><br><br><strong>Contatti Sposi:</strong><br>üì± <a href="tel:+393392165378" class="phone-link">339 216 5378</a>ü§µ<br>üì± <a href="tel:+393461743240" class="phone-link">346 174 3240</a>üë∞</p>
            <p class="lang-en"><strong>Parking:</strong> Available at the venue<br><br><strong>Recommended Hotels:</strong><br><span class="hotel-list">üè® <strong>Acquamarina Hotel</strong> (300m) - <a href="tel:+393487023136" class="phone-link">348 702 3136</a><br>üè® <strong>Palace Hotel</strong> (2km) - <a href="tel:+390968932199" class="phone-link">0968 93219</a><br>üè® <strong>Hotel Lions</strong> (2km) - <a href="tel:+390968999870" class="phone-link">0968 999870</a><br>üè® <strong>Crialesi Boutique Room</strong> (5km) - <a href="tel:+393533412921" class="phone-link">353 341 2921</a></span><br><br><strong>Contact the Couple:</strong><br>üì± <a href="tel:+393392165378" class="phone-link">339 216 5378</a>ü§µ<br>üì± <a href="tel:+393461743240" class="phone-link">346 174 3240</a>üë∞</p>
        </div>
        <div class="info-box">
            <h2 class="lang-it"><span class="icon">‚úàÔ∏èüèôÔ∏è</span> Viaggio di Nozze</h2>
            <h2 class="lang-en"><span class="icon">‚úàÔ∏èüèôÔ∏è</span> Honeymoon</h2>
            <p class="lang-it" style="margin-bottom:20px">Il regalo pi√π grande per noi √® la vostra presenza!<br>Se desiderate contribuire al nostro viaggio di nozze,<br>saremo felici di ricevere il vostro pensiero.</p>
            <p class="lang-en" style="margin-bottom:20px">Your presence is the greatest gift!<br>If you wish to contribute to our honeymoon,<br>we would be delighted to receive your thoughtful gesture.</p>
            <div class="gift-reveal-container">
                <button class="gift-reveal-button lang-it" onclick="toggleGiftInfo()">üíù Mostra dettagli</button>
                <button class="gift-reveal-button lang-en" onclick="toggleGiftInfo()">üíù Show details</button>
                <div class="gift-info-hidden" id="giftInfo"><div class="gift-info-content">
                    <p class="lang-it" style="margin-bottom:15px;font-size:1.1em">üíå Potete contribuire al nostro viaggio con un bonifico a:</p>
                    <p class="lang-en" style="margin-bottom:15px;font-size:1.1em">üíå You can contribute to our trip with a bank transfer to:</p>
                    <div class="iban-box"><strong class="lang-it">Intestatario:</strong><strong class="lang-en">Beneficiary:</strong> Francesco Frustaci & Ornella Barberio<br><strong>IBAN:</strong> <span class="iban-code">LT12 3250 0874 1635 8434</span><br><strong class="lang-it">Causale:</strong><strong class="lang-en">Reference:</strong> <span class="lang-it">Viaggio di nozze Francesco & Ornella</span><span class="lang-en">Honeymoon Francesco & Ornella</span></div>
                    <button class="copy-iban-btn lang-it" onclick="copyIban(event)">üìã Copia IBAN</button>
                    <button class="copy-iban-btn lang-en" onclick="copyIban(event)">üìã Copy IBAN</button>
                </div></div>
            </div>
        </div>
        <div class="rsvp-form">
            <h2 class="lang-it">‚ú® Conferma la tua Presenza ‚ú®</h2>
            <h2 class="lang-en">‚ú® Confirm Your Attendance ‚ú®</h2>
            <form id="rsvpForm">
                <div class="form-group"><label class="lang-it">Nome e Cognome *</label><label class="lang-en">Full Name *</label><input type="text" name="nome" required></div>
                <!-- <div class="form-group"><label>Email *</label><input type="email" name="email" required></div> -->
                <div class="form-group"><label class="lang-it">Telefono</label><label class="lang-en">Phone</label><input type="tel" name="telefono"></div>
                <div class="form-group"><label class="lang-it">Parteciper√≤ *</label><label class="lang-en">I will attend *</label><select name="presenza" onchange="handlePresenzaChange()" required><option value="">Seleziona...</option><option value="si" class="lang-it">S√¨, ci sar√≤! üéâ</option><option value="yes" class="lang-en">Yes, I'll be there! üéâ</option><option value="no" class="lang-it">Mi dispiace, non potr√≤ üò¢</option><option value="no" class="lang-en">Sorry, I can't make it üò¢</option></select></div>
                <div class="form-group"><label class="lang-it">Numero di adulti *</label><label class="lang-en">Number of adults *</label><input type="number" id="numAdulti" name="adulti" min="1" max="10" value="0" required></div>
                <div class="form-group"><label class="lang-it">Numero di bambini</label><label class="lang-en">Number of children</label><input type="number" id="numBambini" name="bambini" min="0" max="10" value="0"></div>
                <div class="form-group" id="menuContainer"></div>
                <div class="form-group"><label class="lang-it">Intolleranze o allergie alimentari</label><label class="lang-en">Food intolerances or allergies</label><textarea name="intolleranze" rows="3" id="intolleranze" placeholder="Es: lattosio, glutine, frutta secca..."></textarea></div>
                <div class="form-group"><label class="lang-it">Un messaggio per noi üíå</label><label class="lang-en">A message for us üíå</label><textarea name="messaggio" rows="4" id="messaggio" placeholder="Lasciaci un messaggio speciale..."></textarea></div>
                <button type="submit" class="lang-it">üíï Invia Conferma üíï</button>
                <button type="submit" class="lang-en">üíï Send Confirmation üíï</button>
            </form>
        </div>
    </div></section></div>
    <div class="loader-overlay" id="loaderOverlay"><div class="loader-content"><div class="loader-spinner"></div><div class="loader-hearts">üíï üíç üíï</div><div class="loader-text lang-it">Invio in corso...</div><div class="loader-text lang-en">Sending...</div></div></div>
    <div class="popup-overlay" id="popupOverlay"><div class="popup-box" id="popupBox"><div class="popup-icon">üéâ‚ú®üíç</div><h2 class="popup-title lang-it">Grazie!</h2><h2 class="popup-title lang-en">Thank you!</h2><p class="popup-message lang-it">La tua conferma √® stata ricevuta con successo!<br>Non vediamo l'ora di festeggiare insieme a te! üíï</p><p class="popup-message lang-en">Your confirmation has been received successfully!<br>We can't wait to celebrate with you! üíï</p><button class="popup-close lang-it" onclick="closePopup()">Perfetto! üéä</button><button class="popup-close lang-en" onclick="closePopup()">Perfect! üéä</button></div></div>
     <footer><p class="lang-it">üíç Non vediamo l'ora di festeggiare con voi! üíç</p><p class="lang-en">üíç We can't wait to celebrate with you! üíç</p><p style="font-size:0.9em;margin-top:10px"><span class="lang-it">Con amore, Francesco e Ornella</span><span class="lang-en">With love, Francesco and Ornella</span></p></footer>
	<script>
	        function updateCountdown() {
            const weddingDate = new Date('2026-08-24T17:30:00').getTime();
            const now = new Date().getTime();
            const distance = weddingDate - now;

            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = days;
                document.getElementById('hours').textContent = hours;
                document.getElementById('minutes').textContent = minutes;
                document.getElementById('seconds').textContent = seconds;
            } else {
                document.getElementById('days').textContent = '0';
                document.getElementById('hours').textContent = '0';
                document.getElementById('minutes').textContent = '0';
                document.getElementById('seconds').textContent = '0';
            }
        }

        // Crea particelle magiche
        function createSparkles() {
            const container = document.getElementById('sparkles');
            const sparkleCount = window.innerWidth < 768 ? 15 : 30;
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 4 + 's';
                sparkle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                container.appendChild(sparkle);
            }
        }

        // Animazione scroll per le info-box
        function animateOnScroll() {
            const boxes = document.querySelectorAll('.info-box');
            boxes.forEach(box => {
                const boxTop = box.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                if (boxTop < windowHeight * 0.8) {
                    box.classList.add('visible');
                }
            });
        }
		
		// Mostra loader
function showLoader() {
    document.getElementById('loaderOverlay').classList.add('show');
}

// Nascondi loader
function hideLoader() {
    document.getElementById('loaderOverlay').classList.remove('show');
}



function handlePresenzaChange() {
    const presenza = document.querySelector('select[name="presenza"]').value;
    const numAdultiInput = document.getElementById('numAdulti');
    
    if (presenza === 'si' || presenza === 'yes') {
        numAdultiInput.value = 1;
    } else if (presenza === 'no') {
        numAdultiInput.value = 0;
    }
    
    // Rigenera i campi menu con il nuovo valore
    generateMenuFields();
}


function generateMenuFields() {
    const numAdulti = parseInt(document.getElementById('numAdulti').value) || 0;
    const numBambini = parseInt(document.getElementById('numBambini').value) || 0;
    const container = document.getElementById('menuContainer');
    const currentLang = document.body.classList.contains('lang-english') ? 'en' : 'it';
    
    // Salva i valori attuali prima di rigenerare
    const savedValues = {};
    const existingSelects = container.querySelectorAll('select');
    existingSelects.forEach(select => {
        savedValues[select.name] = select.value;
    });
    
    container.innerHTML = '';
    
    if (numAdulti + numBambini === 0) {
        return;
    }
    
    const title = document.createElement('label');
    title.style.fontSize = '1.2em';
    title.style.marginBottom = '15px';
    title.style.display = 'block';
    title.innerHTML = currentLang === 'en' ? 
        'Menu Preferences * <span style="font-size:0.85em;color:#999;font-weight:normal;">(one per person)</span>' : 
        'Preferenze Menu * <span style="font-size:0.85em;color:#999;font-weight:normal;">(una per persona)</span>';
    container.appendChild(title);
    
    for (let i = 1; i <= numAdulti; i++) {
        const menuDiv = document.createElement('div');
        menuDiv.className = 'menu-selection';
        
        const heading = document.createElement('h3');
        heading.innerHTML = currentLang === 'en' ? `üë§ Adult ${i}` : `üë§ Adulto ${i}`;
        menuDiv.appendChild(heading);
        
        const select = document.createElement('select');
        select.name = `menu_adulto_${i}`;
        select.required = true;
        
        const options = currentLang === 'en' ? [
            { value: '', text: 'Select...' },
            { value: 'fish', text: 'üêü Fish Menu' },
			{ value: 'meat', text: 'ü•© Meat Menu' },
            { value: 'vegetarian', text: 'ü•ó Vegetarian' },
            { value: 'vegan', text: 'üå± Vegan' }
        ] : [
            { value: '', text: 'Seleziona...' },
		    { value: 'pesce', text: 'üêü Menu Pesce' },
		    { value: 'carne', text: 'ü•© Menu Carne' },
            { value: 'vegetariano', text: 'ü•ó Vegetariano' },
            { value: 'vegano', text: 'üå± Vegano' }
        ];
        
        options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt.value;
            option.textContent = opt.text;
            select.appendChild(option);
        });
        
        // Ripristina il valore salvato se esiste
        if (savedValues[select.name]) {
            select.value = savedValues[select.name];
        }
        
        menuDiv.appendChild(select);
        container.appendChild(menuDiv);
    }
    
    for (let i = 1; i <= numBambini; i++) {
        const menuDiv = document.createElement('div');
        menuDiv.className = 'menu-selection';
        
        const heading = document.createElement('h3');
        heading.innerHTML = currentLang === 'en' ? `üë∂ Child ${i}` : `üë∂ Bambino ${i}`;
        menuDiv.appendChild(heading);
        
        const select = document.createElement('select');
        select.name = `menu_bambino_${i}`;
        select.required = true;
        
        const options = currentLang === 'en' ? [
            { value: '', text: 'Select...' },
            { value: 'children', text: 'üçï Children\'s Menu' },
             { value: 'fish', text: 'üêü Fish Menu' },
			{ value: 'meat', text: 'ü•© Meat Menu' },
           
            { value: 'vegetarian', text: 'ü•ó Vegetarian' },
            { value: 'vegan', text: 'üå± Vegan' }
        ] : [
            { value: '', text: 'Seleziona...' },
            { value: 'bambini', text: 'üçï Menu Bambini' },
			{ value: 'pesce', text: 'üêü Menu Pesce' },
            { value: 'carne', text: 'ü•© Menu Carne' },
            
            { value: 'vegetariano', text: 'ü•ó Vegetariano' },
            { value: 'vegano', text: 'üå± Vegano' }
        ];
        
        options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt.value;
            option.textContent = opt.text;
            select.appendChild(option);
        });
        
        // Ripristina il valore salvato se esiste
        if (savedValues[select.name]) {
            select.value = savedValues[select.name];
        }
        
        menuDiv.appendChild(select);
        container.appendChild(menuDiv);
    }
}

document.getElementById('numAdulti').addEventListener('change', generateMenuFields);
document.getElementById('numBambini').addEventListener('change', generateMenuFields);




        // Gestione form con Google Sheets
        document.getElementById('rsvpForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            showLoader();
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxaQ8VInL_hg2x5o9rWsFN3XZfJ2QgPzxL7aNLRd1-8V7Xk_H5NHja4nBoEBFkl2dHlmw/exec';
            
            const formData = new FormData(this);
			
			const numAdulti = parseInt(formData.get('adulti')) || 0;
			const numBambini = parseInt(formData.get('bambini')) || 0;
			let menuPreferences = [];
			
			for (let i = 1; i <= numAdulti; i++) {
				const menu = formData.get(`menu_adulto_${i}`);
				if (menu) {
					menuPreferences.push(`Adulto ${i}: ${menu}`);
				}
			}
			
			for (let i = 1; i <= numBambini; i++) {
				const menu = formData.get(`menu_bambino_${i}`);
				if (menu) {
					menuPreferences.push(`Bambino ${i}: ${menu}`);
				}
			}
			
			
            const data = {
                nome: formData.get('nome'),
                email: 'N.D',//formData.get('email'),
                telefono: formData.get('telefono'),
                presenza: formData.get('presenza'),
                adulti: formData.get('adulti'),
                bambini: formData.get('bambini'),
                menu: menuPreferences.join(' | '),
                intolleranze: formData.get('intolleranze'),
                messaggio: formData.get('messaggio')
            };
            
            console.log('Dati form:', data);
            const minLoadTime = new Promise(resolve => setTimeout(resolve, 1500));
 
           
            
           try {
        await Promise.all([
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }),
            minLoadTime
        ]);
        
        hideLoader();
        showPopup();
        this.reset();
    } catch (error) {
        console.error('Errore:', error);
        hideLoader();
        alert('Si √® verificato un errore. Riprova pi√π tardi.');
    }
        });

        // Mostra popup con animazione
        function showPopup() {
            const overlay = document.getElementById('popupOverlay');
            overlay.style.display = 'block';
            createConfetti();
        }

        // Chiudi popup
        function closePopup() {
            const overlay = document.getElementById('popupOverlay');
            overlay.style.display = 'none';
        }

        // Crea coriandoli
        function createConfetti() {
            const popup = document.getElementById('popupBox');
            const colors = ['#764ba2', '#667eea', '#ff69b4', '#ffd700', '#ff1493'];
            const confettiCount = window.innerWidth < 768 ? 30 : 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                popup.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Chiudi popup cliccando fuori
        document.getElementById('popupOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closePopup();
            }
        });

        // Toggle Gift Info
        function toggleGiftInfo() {
            const giftInfo = document.getElementById('giftInfo');
            const btnTextIt = document.getElementById('giftBtnTextIt');
            const btnTextEn = document.getElementById('giftBtnTextEn');
            
            if (giftInfo.classList.contains('show')) {
                giftInfo.classList.remove('show');
                btnTextIt.textContent = 'üíù Mostra dettagli';
                btnTextEn.textContent = 'üíù Show details';
            } else {
                giftInfo.classList.add('show');
                btnTextIt.textContent = 'üéÅ Nascondi dettagli';
                btnTextEn.textContent = 'üéÅ Hide details';
            }
        }

        // Cookie Functions
        function setCookie(name, value, days) {
            const d = new Date();
            d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + d.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Language Switcher
        function setLanguage(lang) {
            if (lang === 'en') {
                document.body.classList.add('lang-english');
                document.getElementById('btnIt').classList.remove('active');
                document.getElementById('btnEn').classList.add('active');
            } else {
                document.body.classList.remove('lang-english');
                document.getElementById('btnIt').classList.add('active');
                document.getElementById('btnEn').classList.remove('active');
            }
            // Salva preferenza nei cookie per 365 giorni
            setCookie('language', lang, 365);
            
            // Fix per textarea placeholder
            updateTextareaPlaceholders(lang);
        }

        // Aggiorna placeholder textarea in base alla lingua
        function updateTextareaPlaceholders(lang) {
            const intolleranze = document.getElementById('intolleranze');
            const messaggio = document.getElementById('messaggio');
            
            if (lang === 'en') {
                intolleranze.placeholder = 'E.g.: lactose, gluten, nuts...';
                messaggio.placeholder = 'Leave us a special message...';
            } else {
                intolleranze.placeholder = 'Es: lattosio, glutine, frutta secca...';
                messaggio.placeholder = 'Lasciaci un messaggio speciale...';
            }
        }

        // Carica lingua salvata
        function loadSavedLanguage() {
            const savedLang = getCookie('language');
            if (savedLang && savedLang === 'en') {
                setLanguage('en');
            } else {
                // Assicura che italiano sia default
                setLanguage('it');
            }
        }

        // Copia IBAN
        function copyIban(event) {
			const ibanText = 'LT123250087416358434';
			
			navigator.clipboard.writeText(ibanText).then(function() {
				const btn = event.target;
				const originalText = btn.textContent;
				btn.textContent = '‚úÖ IBAN Copiato!';
				btn.style.background = 'linear-gradient(135deg, #34a853 0%, #0f9d58 100%)';
				
				setTimeout(function() {
					btn.textContent = originalText;
					btn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
				}, 2000);
			}).catch(function(err) {
				alert('Errore nella copia. IBAN: ' + ibanText);
			});
		}

        // Music Player Functions
        let audio;
        let isPlaying = false;
        let isMuted = false;

        function showAudioPermission() {
            setTimeout(() => {
                document.getElementById('audioPermission').classList.add('show');
            }, 2000); // Mostra dopo 2 secondi dall'apertura del sito
        }

        function startMusic() {
            audio = document.getElementById('backgroundMusic');
            audio.volume = 0.3; // Volume al 30%
            
            audio.play().then(() => {
                isPlaying = true;
                document.getElementById('musicPlayer').classList.add('show');
                document.getElementById('audioPermission').classList.remove('show');
                updateProgressBar();
            }).catch(err => {
                console.log('Autoplay bloccato:', err);
            });
        }

        function declineMusic() {
            document.getElementById('audioPermission').classList.remove('show');
        }

        function toggleMusic() {
            if (!audio) {
                audio = document.getElementById('backgroundMusic');
            }
            
            if (isPlaying) {
                audio.pause();
                document.getElementById('playIcon').textContent = '‚ñ∂Ô∏è';
                isPlaying = false;
            } else {
                audio.play();
                document.getElementById('playIcon').textContent = '‚è∏Ô∏è';
                isPlaying = true;
                updateProgressBar();
            }
        }

        function toggleMute() {
            if (!audio) return;
            
            if (isMuted) {
                audio.muted = false;
                document.getElementById('volumeIcon').textContent = 'üîä';
                isMuted = false;
            } else {
                audio.muted = true;
                document.getElementById('volumeIcon').textContent = 'üîá';
                isMuted = true;
            }
        }

        function closePlayer() {
            if (audio) {
                audio.pause();
                isPlaying = false;
            }
            document.getElementById('musicPlayer').classList.remove('show');
        }

        function updateProgressBar() {
            if (!audio) return;
            
            const progressInterval = setInterval(() => {
                if (!isPlaying || !audio) {
                    clearInterval(progressInterval);
                    return;
                }
                
                const progress = (audio.currentTime / audio.duration) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                
                if (audio.ended) {
                    clearInterval(progressInterval);
                }
            }, 100);
        }

        // Inizializza
        createSparkles();
        updateCountdown();
        setInterval(updateCountdown, 1000);
        window.addEventListener('scroll', animateOnScroll);
        window.addEventListener('resize', createSparkles);
        animateOnScroll();
        
        // Carica lingua salvata all'avvio
        loadSavedLanguage();
        
        // Mostra permesso audio dopo 2 secondi (commenta questa riga se non vuoi il popup musicale)
        // showAudioPermission();
        

    </script>
   